let data = {
    "types":["Animation","Children's","Comedy","Adventure","Fantasy","Romance","Drama","Action","Crime","Thriller","Horror","Sci-Fi","Documentary","War","Musical","Mystery","Film-Noir","Western"],
    "year":["Apr-15", "May-15", "Jun-15", "Jul-15", "Aug-15", "Sep-15", "Oct-15", "Nov-15", "Dec-15", "Jan-16", "Feb-16", "Mar-16", "Apr-16", "May-16", "Jun-16", "Jul-16", "Aug-16", "Sep-16", "Oct-16", "Nov-16", "Dec-16", "Jan-17", "Feb-17", "Mar-17", "Apr-17", "May-17", "Jun-17", "Jul-17", "Aug-17", "Sep-17", "Oct-17", "Nov-17", "Dec-17", "Jan-18", "Feb-18"],
    "series":[[[447, 3.6778523489932886, 75, "Animation"], [823, 3.422843256379101, 175, "Children's"], [3615, 3.4199170124481326, 709, "Comedy"], [1809, 3.4737423991155336, 210, "Adventure"], [478, 3.49581589958159, 55, "Fantasy"], [1690, 3.5467455621301776, 305, "Romance"], [4040, 3.705940594059406, 846, "Drama"], [3169, 3.526349005995582, 359, "Action"], [862, 3.7006960556844546, 124, "Crime"], [2145, 3.604662004662005, 329, "Thriller"], [840, 3.2726190476190475, 188, "Horror"], [2059, 3.525497814473045, 199, "Sci-Fi"], [61, 4.131147540983607, 31, "Documentary"], [766, 3.9151436031331595, 97, "War"], [477, 3.6457023060796647, 84, "Musical"], [444, 3.7387387387387387, 83, "Mystery"], [245, 4.244897959183674, 29, "Film-Noir"], [226, 3.4867256637168142, 41, "Western"]], [[3031, 3.7136258660508084, 89, "Animation"], [5119, 3.4270365305723773, 226, "Children's"], [23206, 3.5457209342411447, 953, "Comedy"], [9340, 3.4948608137044967, 252, "Adventure"], [2653, 3.480211081794195, 63, "Fantasy"], [10515, 3.6584878744650497, 393, "Romance"], [22925, 3.808724100327154, 1119, "Drama"], [17394, 3.5255835345521445, 439, "Action"], [5350, 3.7549532710280373, 163, "Crime"], [12390, 3.6386602098466505, 408, "Thriller"], [5018, 3.25787166201674, 270, "Horror"], [10396, 3.497883801462101, 235, "Sci-Fi"], [477, 3.920335429769392, 67, "Documentary"], [4727, 3.9208800507721597, 127, "War"], [3022, 3.6892786234281933, 100, "Musical"], [2697, 3.7764182424916575, 92, "Mystery"], [1409, 4.112845990063875, 39, "Film-Noir"], [1367, 3.6115581565471837, 56, "Western"]], [[2253, 3.636040834442965, 98, "Animation"], [3835, 3.392698826597132, 238, "Children's"], [20094, 3.5672340001990643, 961, "Comedy"], [7309, 3.4729785196333287, 254, "Adventure"], [2058, 3.4188532555879494, 64, "Fantasy"], [9132, 3.6214410862899693, 394, "Romance"], [20881, 3.781811215937934, 1149, "Drama"], [13472, 3.5061609263657956, 437, "Action"], [4255, 3.7743830787309047, 167, "Crime"], [9760, 3.6232581967213116, 414, "Thriller"], [3295, 3.3047040971168435, 249, "Horror"], [8417, 3.484614470714031, 239, "Sci-Fi"], [459, 4.0, 69, "Documentary"], [3704, 3.8857991360691146, 123, "War"], [2409, 3.621834786218348, 103, "Musical"], [2107, 3.7171333649738965, 93, "Mystery"], [1120, 4.08125, 38, "Film-Noir"], [1036, 3.6283783783783785, 52, "Western"]], [[4043, 3.7143210487261933, 102, "Animation"], [6662, 3.465926148303813, 239, "Children's"], [30767, 3.595930704976111, 1004, "Comedy"], [11756, 3.520244981286152, 261, "Adventure"], [3339, 3.4866726564839774, 63, "Fantasy"], [13541, 3.678901115131822, 408, "Romance"], [32929, 3.807312703088463, 1218, "Drama"], [21659, 3.5183988180433077, 460, "Action"], [7087, 3.7595597573021022, 180, "Crime"], [16393, 3.6291709876166656, 438, "Thriller"], [6240, 3.20625, 287, "Horror"], [13964, 3.5030077341735892, 248, "Sci-Fi"], [836, 4.017942583732057, 77, "Documentary"], [6429, 3.9234717685487634, 132, "War"], [3914, 3.7100153295861014, 108, "Musical"], [3948, 3.746707193515704, 96, "Mystery"], [1763, 4.105501985252411, 37, "Film-Noir"], [1898, 3.6749209694415175, 59, "Western"]], [[7117, 3.7279752704791345, 104, "Animation"], [12467, 3.42135237025748, 245, "Children's"], [65343, 3.5001606905100777, 1056, "Comedy"], [25601, 3.4956837623530332, 269, "Adventure"], [6857, 3.460405425113023, 65, "Fantasy"], [25487, 3.5913603013300897, 437, "Romance"], [61395, 3.7474875804218586, 1282, "Drama"], [52150, 3.5204985618408435, 475, "Action"], [15460, 3.7040750323415264, 183, "Crime"], [37294, 3.5865822920577037, 454, "Thriller"], [16477, 3.2345693997693754, 306, "Horror"], [30156, 3.4823252420745456, 261, "Sci-Fi"], [1140, 3.8640350877192984, 74, "Documentary"], [13127, 3.8935781214291154, 136, "War"], [6680, 3.651497005988024, 108, "Musical"], [7605, 3.651939513477975, 101, "Mystery"], [3125, 4.07104, 40, "Film-Noir"], [4474, 3.7056325435851587, 63, "Western"]], [[1926, 3.716510903426791, 94, "Animation"], [3223, 3.4318957493018925, 221, "Children's"], [18270, 3.535303776683087, 981, "Comedy"], [6919, 3.489521607168666, 253, "Adventure"], [1800, 3.4877777777777776, 65, "Fantasy"], [7780, 3.636503856041131, 403, "Romance"], [19041, 3.797279554645239, 1179, "Drama"], [13466, 3.4890836180008913, 461, "Action"], [4480, 3.7223214285714286, 178, "Crime"], [10101, 3.589050589050589, 432, "Thriller"], [3816, 3.1635220125786163, 306, "Horror"], [8283, 3.493782445973681, 258, "Sci-Fi"], [399, 3.899749373433584, 68, "Documentary"], [3553, 3.9231635237827187, 133, "War"], [1922, 3.727887617065557, 105, "Musical"], [2114, 3.6570482497634815, 94, "Mystery"], [928, 4.036637931034483, 38, "Film-Noir"], [991, 3.669021190716448, 60, "Western"]], [[1866, 3.747052518756699, 94, "Animation"], [3196, 3.5519399249061325, 225, "Children's"], [15164, 3.594566077552097, 985, "Comedy"], [5912, 3.5245263870094723, 256, "Adventure"], [1615, 3.540557275541796, 63, "Fantasy"], [6333, 3.6281383230696354, 391, "Romance"], [14956, 3.7915217972719977, 1173, "Drama"], [11306, 3.5393596320537766, 470, "Action"], [3450, 3.7402898550724637, 174, "Crime"], [8478, 3.6012031139419673, 438, "Thriller"], [3316, 3.2879975874547647, 289, "Horror"], [7003, 3.5057832357561045, 253, "Sci-Fi"], [366, 4.002732240437158, 64, "Documentary"], [2815, 3.919715808170515, 127, "War"], [1837, 3.744692433315188, 102, "Musical"], [1614, 3.7063197026022303, 93, "Mystery"], [722, 4.03601108033241, 36, "Film-Noir"], [908, 3.697136563876652, 52, "Western"]], [[12966, 3.6640444238778342, 105, "Animation"], [21006, 3.394315909740074, 249, "Children's"], [103006, 3.525571325942178, 1128, "Comedy"], [39529, 3.4675301677249615, 277, "Adventure"], [10564, 3.4175501703900037, 68, "Fantasy"], [42130, 3.6005934013766914, 453, "Romance"], [101318, 3.768155707771571, 1412, "Drama"], [75129, 3.4740113671152284, 483, "Action"], [22555, 3.7042784305032144, 194, "Crime"], [54722, 3.5474397865575087, 471, "Thriller"], [22813, 3.199886029895235, 331, "Horror"], [47792, 3.449426682289923, 271, "Sci-Fi"], [2305, 3.9475054229934923, 95, "Documentary"], [20370, 3.8937653411880215, 140, "War"], [12413, 3.641827116732458, 112, "Musical"], [11655, 3.6422994422994424, 103, "Mystery"], [5623, 4.094967099413124, 43, "Film-Noir"], [5818, 3.594018563080096, 63, "Western"]], [[5257, 3.7340688605668633, 104, "Animation"], [8743, 3.4809561935262496, 246, "Children's"], [41868, 3.5187255182955957, 1079, "Comedy"], [15852, 3.4881402977542266, 269, "Adventure"], [4187, 3.4693097683305467, 67, "Fantasy"], [17113, 3.598667679541869, 428, "Romance"], [40993, 3.7696192032786087, 1327, "Drama"], [30305, 3.4985645933014355, 477, "Action"], [9092, 3.676858776946766, 189, "Crime"], [21531, 3.555571037109284, 457, "Thriller"], [8068, 3.2434308378780368, 308, "Horror"], [17944, 3.4838943379402587, 266, "Sci-Fi"], [897, 3.9130434782608696, 80, "Documentary"], [7933, 3.9016765410311356, 135, "War"], [4709, 3.6882565300488426, 107, "Musical"], [4478, 3.615230013398839, 101, "Mystery"], [1962, 4.018858307849134, 40, "Film-Noir"], [2309, 3.6080554352533563, 59, "Western"]], [[926, 3.64902807775378, 94, "Animation"], [1455, 3.4240549828178692, 212, "Children's"], [6420, 3.4822429906542056, 913, "Comedy"], [2031, 3.448055145248646, 238, "Adventure"], [564, 3.4574468085106385, 60, "Fantasy"], [2651, 3.5926065635609206, 374, "Romance"], [6872, 3.733556461001164, 1064, "Drama"], [3937, 3.4696469392938787, 428, "Action"], [1549, 3.7288573273079404, 159, "Crime"], [3715, 3.516823687752355, 418, "Thriller"], [1168, 3.1386986301369864, 218, "Horror"], [2213, 3.4193402620876636, 237, "Sci-Fi"], [181, 3.7679558011049723, 56, "Documentary"], [903, 3.784053156146179, 116, "War"], [866, 3.66743648960739, 94, "Musical"], [805, 3.6546583850931675, 88, "Mystery"], [273, 4.010989010989011, 32, "Film-Noir"], [344, 3.6569767441860463, 49, "Western"]], [[525, 3.638095238095238, 87, "Animation"], [790, 3.446835443037975, 181, "Children's"], [3304, 3.4279661016949152, 807, "Comedy"], [869, 3.4200230149597237, 194, "Adventure"], [278, 3.4388489208633093, 58, "Fantasy"], [1178, 3.634974533106961, 306, "Romance"], [2880, 3.7666666666666666, 819, "Drama"], [1737, 3.4035693724812894, 371, "Action"], [577, 3.6291161178509532, 121, "Crime"], [1208, 3.5264900662251657, 317, "Thriller"], [547, 3.206581352833638, 168, "Horror"], [905, 3.414364640883978, 205, "Sci-Fi"], [55, 3.9272727272727272, 34, "Documentary"], [455, 3.8065934065934064, 103, "War"], [398, 3.663316582914573, 82, "Musical"], [249, 3.751004016064257, 71, "Mystery"], [110, 3.9272727272727272, 27, "Film-Noir"], [133, 3.473684210526316, 36, "Western"]], [[303, 3.5313531353135312, 79, "Animation"], [438, 3.3401826484018264, 146, "Children's"], [2379, 3.462799495586381, 691, "Comedy"], [567, 3.4074074074074074, 182, "Adventure"], [145, 3.3586206896551722, 44, "Fantasy"], [808, 3.4319306930693068, 282, "Romance"], [2311, 3.7715274772825618, 774, "Drama"], [1057, 3.315988647114475, 340, "Action"], [412, 3.628640776699029, 118, "Crime"], [949, 3.481559536354057, 303, "Thriller"], [394, 3.0, 170, "Horror"], [563, 3.355239786856128, 175, "Sci-Fi"], [66, 3.9696969696969697, 33, "Documentary"], [294, 3.901360544217687, 91, "War"], [237, 3.628691983122363, 74, "Musical"], [206, 3.8883495145631066, 60, "Mystery"], [92, 4.108695652173913, 24, "Film-Noir"], [101, 3.603960396039604, 38, "Western"]], [[293, 3.6040955631399316, 87, "Animation"], [448, 3.4441964285714284, 170, "Children's"], [1826, 3.407447973713034, 662, "Comedy"], [523, 3.3938814531548758, 208, "Adventure"], [157, 3.388535031847134, 57, "Fantasy"], [634, 3.498422712933754, 264, "Romance"], [1902, 3.692429022082019, 703, "Drama"], [1003, 3.3559322033898304, 339, "Action"], [369, 3.5663956639566394, 118, "Crime"], [1013, 3.3968410661401776, 330, "Thriller"], [376, 3.0452127659574466, 172, "Horror"], [580, 3.406896551724138, 187, "Sci-Fi"], [54, 3.8333333333333335, 23, "Documentary"], [217, 3.7972350230414746, 83, "War"], [240, 3.7416666666666667, 81, "Musical"], [175, 3.565714285714286, 70, "Mystery"], [76, 4.0394736842105265, 26, "Film-Noir"], [65, 3.5538461538461537, 31, "Western"]], [[212, 2.9952830188679247, 81, "Animation"], [386, 3.1528497409326426, 166, "Children's"], [2061, 3.427947598253275, 675, "Comedy"], [510, 3.2529411764705882, 188, "Adventure"], [120, 3.3583333333333334, 47, "Fantasy"], [719, 3.618915159944367, 263, "Romance"], [1842, 3.6682953311617807, 719, "Drama"], [1040, 3.231730769230769, 351, "Action"], [306, 3.503267973856209, 109, "Crime"], [857, 3.3010501750291716, 297, "Thriller"], [365, 3.208219178082192, 162, "Horror"], [516, 3.2073643410852712, 180, "Sci-Fi"], [54, 3.6481481481481484, 29, "Documentary"], [238, 3.5840336134453783, 92, "War"], [211, 3.3791469194312795, 78, "Musical"], [195, 3.4205128205128204, 71, "Mystery"], [45, 3.933333333333333, 20, "Film-Noir"], [57, 3.8947368421052633, 31, "Western"]], [[191, 3.3717277486910993, 66, "Animation"], [291, 3.209621993127148, 131, "Children's"], [1943, 3.4009264024704065, 664, "Comedy"], [517, 3.3307543520309477, 167, "Adventure"], [108, 3.3796296296296298, 42, "Fantasy"], [673, 3.4561664190193166, 267, "Romance"], [1906, 3.6416579223504724, 695, "Drama"], [1166, 3.4133790737564325, 343, "Action"], [385, 3.6857142857142855, 113, "Crime"], [867, 3.51441753171857, 285, "Thriller"], [263, 2.9961977186311786, 121, "Horror"], [632, 3.2800632911392404, 181, "Sci-Fi"], [37, 3.945945945945946, 23, "Documentary"], [234, 3.6880341880341883, 74, "War"], [152, 3.473684210526316, 65, "Musical"], [173, 3.722543352601156, 63, "Mystery"], [57, 4.087719298245614, 18, "Film-Noir"], [56, 3.5, 26, "Western"]], [[197, 3.5076142131979697, 72, "Animation"], [345, 3.2753623188405796, 145, "Children's"], [1755, 3.40968660968661, 639, "Comedy"], [444, 3.328828828828829, 168, "Adventure"], [96, 3.2395833333333335, 37, "Fantasy"], [579, 3.459412780656304, 239, "Romance"], [1733, 3.668782458165032, 659, "Drama"], [981, 3.3221202854230376, 319, "Action"], [352, 3.6676136363636362, 120, "Crime"], [869, 3.4177215189873418, 291, "Thriller"], [323, 3.1052631578947367, 148, "Horror"], [520, 3.3576923076923078, 174, "Sci-Fi"], [42, 3.9523809523809526, 28, "Documentary"], [237, 3.8649789029535864, 74, "War"], [227, 3.511013215859031, 86, "Musical"], [152, 3.8223684210526314, 61, "Mystery"], [61, 4.147540983606557, 27, "Film-Noir"], [64, 3.5, 29, "Western"]], [[210, 3.6476190476190475, 65, "Animation"], [370, 3.3216216216216217, 130, "Children's"], [1597, 3.4571070757670634, 592, "Comedy"], [519, 3.204238921001927, 157, "Adventure"], [125, 3.248, 45, "Fantasy"], [728, 3.526098901098901, 271, "Romance"], [1609, 3.678060907395898, 637, "Drama"], [1019, 3.321884200196271, 309, "Action"], [302, 3.615894039735099, 107, "Crime"], [904, 3.4059734513274336, 296, "Thriller"], [342, 2.9707602339181287, 133, "Horror"], [667, 3.12143928035982, 196, "Sci-Fi"], [39, 3.948717948717949, 27, "Documentary"], [275, 3.810909090909091, 83, "War"], [209, 3.674641148325359, 69, "Musical"], [161, 3.5527950310559007, 54, "Mystery"], [51, 3.8627450980392157, 22, "Film-Noir"], [67, 3.253731343283582, 28, "Western"]], [[106, 3.69811320754717, 54, "Animation"], [210, 3.357142857142857, 119, "Children's"], [1181, 3.51735817104149, 571, "Comedy"], [299, 3.3946488294314383, 153, "Adventure"], [82, 3.3536585365853657, 41, "Fantasy"], [457, 3.4595185995623634, 221, "Romance"], [1218, 3.691297208538588, 591, "Drama"], [479, 3.461377870563674, 242, "Action"], [217, 3.6175115207373274, 106, "Crime"], [473, 3.5052854122621566, 225, "Thriller"], [249, 3.068273092369478, 136, "Horror"], [309, 3.472491909385113, 155, "Sci-Fi"], [33, 4.0, 24, "Documentary"], [162, 4.0246913580246915, 66, "War"], [142, 3.76056338028169, 80, "Musical"], [110, 3.581818181818182, 57, "Mystery"], [48, 3.8958333333333335, 23, "Film-Noir"], [57, 3.719298245614035, 31, "Western"]], [[64, 3.640625, 32, "Animation"], [106, 3.443396226415094, 63, "Children's"], [693, 3.2683982683982684, 381, "Comedy"], [289, 3.28719723183391, 139, "Adventure"], [70, 3.4285714285714284, 34, "Fantasy"], [387, 3.3333333333333335, 215, "Romance"], [906, 3.609271523178808, 498, "Drama"], [563, 3.1651865008880993, 278, "Action"], [170, 3.541176470588235, 81, "Crime"], [414, 3.4106280193236715, 203, "Thriller"], [142, 3.0774647887323945, 76, "Horror"], [283, 3.2367491166077738, 134, "Sci-Fi"], [22, 4.2727272727272725, 15, "Documentary"], [141, 3.6666666666666665, 67, "War"], [58, 3.6724137931034484, 40, "Musical"], [80, 3.4125, 45, "Mystery"], [41, 4.121951219512195, 21, "Film-Noir"], [40, 3.475, 20, "Western"]], [[160, 3.54375, 64, "Animation"], [234, 3.3290598290598292, 116, "Children's"], [963, 3.4714434060228454, 471, "Comedy"], [262, 3.3969465648854964, 123, "Adventure"], [81, 3.2839506172839505, 35, "Fantasy"], [397, 3.632241813602015, 203, "Romance"], [988, 3.7621457489878543, 510, "Drama"], [553, 3.426763110307414, 246, "Action"], [216, 3.6712962962962963, 90, "Crime"], [457, 3.62582056892779, 220, "Thriller"], [140, 3.2214285714285715, 79, "Horror"], [281, 3.4377224199288254, 126, "Sci-Fi"], [38, 4.0, 24, "Documentary"], [230, 3.9391304347826086, 105, "War"], [118, 3.669491525423729, 56, "Musical"], [97, 3.443298969072165, 49, "Mystery"], [60, 4.3, 29, "Film-Noir"], [35, 3.914285714285714, 23, "Western"]], [[152, 3.4934210526315788, 64, "Animation"], [199, 3.321608040201005, 98, "Children's"], [1160, 3.424137931034483, 524, "Comedy"], [303, 3.297029702970297, 143, "Adventure"], [66, 3.212121212121212, 33, "Fantasy"], [514, 3.5311284046692606, 241, "Romance"], [1416, 3.6913841807909606, 647, "Drama"], [638, 3.40282131661442, 257, "Action"], [194, 3.6237113402061856, 94, "Crime"], [582, 3.5034364261168385, 259, "Thriller"], [239, 3.0460251046025104, 125, "Horror"], [432, 3.3310185185185186, 169, "Sci-Fi"], [43, 3.883720930232558, 29, "Documentary"], [222, 3.6621621621621623, 88, "War"], [178, 3.657303370786517, 76, "Musical"], [131, 3.732824427480916, 63, "Mystery"], [50, 3.92, 26, "Film-Noir"], [93, 3.827956989247312, 46, "Western"]], [[148, 3.5135135135135136, 64, "Animation"], [233, 3.2103004291845494, 122, "Children's"], [1136, 3.448943661971831, 537, "Comedy"], [335, 3.343283582089552, 148, "Adventure"], [105, 2.895238095238095, 49, "Fantasy"], [496, 3.653225806451613, 240, "Romance"], [1178, 3.7775891341256367, 595, "Drama"], [622, 3.4662379421221865, 258, "Action"], [211, 3.6066350710900474, 96, "Crime"], [669, 3.591928251121076, 264, "Thriller"], [293, 3.4129692832764507, 135, "Horror"], [441, 3.3582766439909295, 169, "Sci-Fi"], [26, 3.8846153846153846, 16, "Documentary"], [191, 3.979057591623037, 81, "War"], [123, 3.5934959349593494, 60, "Musical"], [128, 3.7578125, 58, "Mystery"], [56, 4.089285714285714, 23, "Film-Noir"], [36, 3.4722222222222223, 21, "Western"]], [[102, 3.4607843137254903, 54, "Animation"], [174, 3.281609195402299, 108, "Children's"], [879, 3.4379977246871443, 462, "Comedy"], [275, 3.4072727272727272, 133, "Adventure"], [76, 3.710526315789474, 33, "Fantasy"], [311, 3.469453376205788, 170, "Romance"], [905, 3.664088397790055, 504, "Drama"], [471, 3.3630573248407645, 221, "Action"], [150, 3.6733333333333333, 84, "Crime"], [371, 3.439353099730458, 190, "Thriller"], [197, 3.0253807106598987, 117, "Horror"], [467, 3.45610278372591, 178, "Sci-Fi"], [17, 3.6470588235294117, 12, "Documentary"], [128, 3.84375, 63, "War"], [96, 3.6666666666666665, 48, "Musical"], [81, 3.4814814814814814, 47, "Mystery"], [36, 4.027777777777778, 17, "Film-Noir"], [87, 3.6206896551724137, 44, "Western"]], [[122, 3.221311475409836, 59, "Animation"], [170, 3.0352941176470587, 93, "Children's"], [929, 3.2142088266953714, 496, "Comedy"], [214, 3.0654205607476634, 118, "Adventure"], [55, 3.309090909090909, 30, "Fantasy"], [359, 3.32033426183844, 194, "Romance"], [898, 3.5, 508, "Drama"], [452, 3.061946902654867, 261, "Action"], [169, 3.3491124260355027, 90, "Crime"], [387, 3.1963824289405687, 217, "Thriller"], [211, 3.156398104265403, 136, "Horror"], [254, 2.984251968503937, 138, "Sci-Fi"], [30, 3.9, 22, "Documentary"], [122, 3.5327868852459017, 65, "War"], [91, 3.3956043956043955, 54, "Musical"], [92, 3.3369565217391304, 55, "Mystery"], [23, 3.782608695652174, 13, "Film-Noir"], [53, 3.4716981132075473, 29, "Western"]], [[111, 3.981981981981982, 52, "Animation"], [227, 3.537444933920705, 122, "Children's"], [1051, 3.367269267364415, 558, "Comedy"], [339, 3.309734513274336, 161, "Adventure"], [107, 3.289719626168224, 46, "Fantasy"], [413, 3.610169491525424, 221, "Romance"], [1120, 3.7, 623, "Drama"], [517, 3.375241779497099, 273, "Action"], [172, 3.4302325581395348, 91, "Crime"], [360, 3.4027777777777777, 209, "Thriller"], [212, 3.061320754716981, 141, "Horror"], [337, 3.3323442136498516, 170, "Sci-Fi"], [24, 3.875, 18, "Documentary"], [148, 3.641891891891892, 79, "War"], [151, 3.9735099337748343, 72, "Musical"], [66, 3.5, 44, "Mystery"], [27, 3.5555555555555554, 18, "Film-Noir"], [63, 3.6666666666666665, 36, "Western"]], [[48, 3.5, 36, "Animation"], [96, 3.25, 73, "Children's"], [570, 3.463157894736842, 360, "Comedy"], [170, 3.4352941176470586, 103, "Adventure"], [47, 3.5319148936170213, 27, "Fantasy"], [250, 3.592, 148, "Romance"], [736, 3.595108695652174, 459, "Drama"], [312, 3.41025641025641, 171, "Action"], [122, 3.598360655737705, 69, "Crime"], [351, 3.680911680911681, 198, "Thriller"], [132, 3.3863636363636362, 94, "Horror"], [227, 3.4757709251101323, 114, "Sci-Fi"], [21, 4.190476190476191, 16, "Documentary"], [103, 3.766990291262136, 55, "War"], [50, 3.9, 39, "Musical"], [82, 3.817073170731707, 48, "Mystery"], [26, 4.0, 15, "Film-Noir"], [33, 3.515151515151515, 25, "Western"]], [[64, 3.359375, 38, "Animation"], [96, 3.09375, 60, "Children's"], [651, 3.4270353302611367, 376, "Comedy"], [172, 3.2906976744186047, 96, "Adventure"], [44, 3.2954545454545454, 29, "Fantasy"], [304, 3.6151315789473686, 183, "Romance"], [692, 3.709537572254335, 454, "Drama"], [357, 3.310924369747899, 203, "Action"], [128, 3.609375, 72, "Crime"], [300, 3.38, 179, "Thriller"], [100, 3.08, 71, "Horror"], [202, 3.272277227722772, 109, "Sci-Fi"], [15, 3.6666666666666665, 14, "Documentary"], [92, 3.369565217391304, 57, "War"], [68, 3.2941176470588234, 37, "Musical"], [72, 3.75, 41, "Mystery"], [31, 3.774193548387097, 15, "Film-Noir"], [44, 3.75, 26, "Western"]], [[76, 3.6973684210526314, 52, "Animation"], [134, 3.3582089552238807, 92, "Children's"], [692, 3.3583815028901736, 430, "Comedy"], [185, 3.081081081081081, 116, "Adventure"], [48, 3.2083333333333335, 26, "Fantasy"], [239, 3.4686192468619246, 155, "Romance"], [684, 3.6447368421052633, 429, "Drama"], [392, 3.1964285714285716, 233, "Action"], [138, 3.5, 86, "Crime"], [364, 3.3104395604395602, 209, "Thriller"], [165, 2.824242424242424, 97, "Horror"], [221, 3.0588235294117645, 124, "Sci-Fi"], [13, 3.3846153846153846, 9, "Documentary"], [96, 3.6041666666666665, 62, "War"], [82, 3.8658536585365852, 52, "Musical"], [81, 3.4691358024691357, 44, "Mystery"], [28, 4.035714285714286, 17, "Film-Noir"], [22, 3.3636363636363638, 15, "Western"]], [[84, 3.4285714285714284, 52, "Animation"], [162, 3.154320987654321, 108, "Children's"], [739, 3.1596752368064953, 427, "Comedy"], [285, 3.136842105263158, 149, "Adventure"], [89, 3.134831460674157, 43, "Fantasy"], [309, 3.168284789644013, 171, "Romance"], [702, 3.462962962962963, 438, "Drama"], [492, 3.0833333333333335, 245, "Action"], [159, 3.3333333333333335, 82, "Crime"], [379, 3.2401055408970976, 213, "Thriller"], [140, 2.907142857142857, 91, "Horror"], [270, 3.140740740740741, 136, "Sci-Fi"], [25, 3.92, 19, "Documentary"], [121, 3.5454545454545454, 58, "War"], [72, 3.236111111111111, 40, "Musical"], [76, 3.3684210526315788, 51, "Mystery"], [22, 3.9545454545454546, 17, "Film-Noir"], [47, 3.617021276595745, 24, "Western"]], [[28, 3.357142857142857, 24, "Animation"], [62, 3.1451612903225805, 50, "Children's"], [392, 3.375, 285, "Comedy"], [126, 3.261904761904762, 89, "Adventure"], [37, 3.189189189189189, 23, "Fantasy"], [184, 3.489130434782609, 134, "Romance"], [560, 3.6375, 409, "Drama"], [233, 3.296137339055794, 155, "Action"], [91, 3.4835164835164836, 64, "Crime"], [261, 3.2873563218390807, 177, "Thriller"], [76, 2.8157894736842106, 60, "Horror"], [142, 3.183098591549296, 102, "Sci-Fi"], [21, 4.095238095238095, 17, "Documentary"], [73, 3.808219178082192, 54, "War"], [48, 3.5833333333333335, 36, "Musical"], [59, 3.440677966101695, 37, "Mystery"], [22, 3.8181818181818183, 15, "Film-Noir"], [20, 3.95, 14, "Western"]], [[31, 3.4838709677419355, 26, "Animation"], [64, 3.140625, 53, "Children's"], [486, 3.4732510288065845, 318, "Comedy"], [83, 3.3373493975903616, 64, "Adventure"], [31, 3.3225806451612905, 19, "Fantasy"], [183, 3.5245901639344264, 123, "Romance"], [399, 3.7468671679197993, 295, "Drama"], [168, 3.5238095238095237, 122, "Action"], [73, 3.73972602739726, 49, "Crime"], [133, 3.481203007518797, 99, "Thriller"], [42, 3.0952380952380953, 33, "Horror"], [72, 3.4444444444444446, 53, "Sci-Fi"], [16, 4.125, 12, "Documentary"], [52, 4.115384615384615, 40, "War"], [38, 3.5526315789473686, 26, "Musical"], [20, 4.0, 18, "Mystery"], [10, 4.5, 10, "Film-Noir"], [10, 3.5, 8, "Western"]], [[59, 3.6610169491525424, 33, "Animation"], [107, 3.2336448598130842, 66, "Children's"], [766, 3.3746736292428197, 458, "Comedy"], [135, 3.3185185185185184, 90, "Adventure"], [54, 3.2037037037037037, 32, "Fantasy"], [352, 3.5681818181818183, 202, "Romance"], [826, 3.76271186440678, 492, "Drama"], [309, 3.385113268608414, 190, "Action"], [148, 3.5405405405405403, 92, "Crime"], [283, 3.508833922261484, 188, "Thriller"], [90, 3.1333333333333333, 65, "Horror"], [156, 3.2115384615384617, 98, "Sci-Fi"], [26, 4.153846153846154, 19, "Documentary"], [120, 3.75, 61, "War"], [80, 3.6, 46, "Musical"], [74, 3.7162162162162162, 46, "Mystery"], [35, 3.942857142857143, 24, "Film-Noir"], [28, 3.392857142857143, 22, "Western"]], [[77, 4.090909090909091, 46, "Animation"], [122, 3.7295081967213113, 74, "Children's"], [400, 3.375, 266, "Comedy"], [124, 3.443548387096774, 79, "Adventure"], [56, 3.1964285714285716, 25, "Fantasy"], [177, 3.519774011299435, 114, "Romance"], [514, 3.6342412451361867, 339, "Drama"], [238, 3.2857142857142856, 150, "Action"], [89, 3.4831460674157304, 55, "Crime"], [179, 3.4189944134078214, 123, "Thriller"], [86, 3.0697674418604652, 70, "Horror"], [150, 3.4066666666666667, 89, "Sci-Fi"], [11, 3.6363636363636362, 9, "Documentary"], [65, 3.8, 45, "War"], [71, 3.859154929577465, 45, "Musical"], [47, 3.6382978723404253, 38, "Mystery"], [29, 4.137931034482759, 14, "Film-Noir"], [27, 3.5925925925925926, 16, "Western"]], [[50, 3.48, 31, "Animation"], [105, 3.380952380952381, 69, "Children's"], [674, 3.370919881305638, 404, "Comedy"], [182, 3.60989010989011, 111, "Adventure"], [58, 3.603448275862069, 34, "Fantasy"], [294, 3.6054421768707483, 181, "Romance"], [761, 3.6727989487516424, 478, "Drama"], [348, 3.4913793103448274, 201, "Action"], [135, 3.7333333333333334, 86, "Crime"], [251, 3.4661354581673307, 163, "Thriller"], [118, 2.7542372881355934, 87, "Horror"], [190, 3.2736842105263158, 103, "Sci-Fi"], [38, 3.4210526315789473, 26, "Documentary"], [95, 3.9157894736842107, 57, "War"], [82, 3.6951219512195124, 47, "Musical"], [49, 3.5918367346938775, 38, "Mystery"], [38, 4.157894736842105, 20, "Film-Noir"], [38, 3.6315789473684212, 21, "Western"]], [[48, 3.3125, 34, "Animation"], [86, 3.104651162790698, 66, "Children's"], [592, 3.4307432432432434, 370, "Comedy"], [165, 3.187878787878788, 103, "Adventure"], [47, 3.1702127659574466, 31, "Fantasy"], [206, 3.529126213592233, 136, "Romance"], [492, 3.7113821138211383, 330, "Drama"], [323, 3.2569659442724457, 192, "Action"], [116, 3.7586206896551726, 72, "Crime"], [269, 3.3940520446096656, 174, "Thriller"], [82, 3.0365853658536586, 55, "Horror"], [249, 3.0562248995983934, 135, "Sci-Fi"], [23, 4.173913043478261, 22, "Documentary"], [89, 3.955056179775281, 47, "War"], [55, 3.5636363636363635, 44, "Musical"], [55, 3.6545454545454548, 39, "Mystery"], [17, 4.411764705882353, 12, "Film-Noir"], [36, 3.4722222222222223, 22, "Western"]], [[0, 0, 0, "Animation"], [2, 1.0, 2, "Children's"], [1, 4.0, 1, "Comedy"], [3, 2.0, 3, "Adventure"], [4, 2.5, 4, "Fantasy"], [0, 0, 0, "Romance"], [1, 4.0, 1, "Drama"], [0, 0, 0, "Action"], [0, 0, 0, "Crime"], [1, 5.0, 1, "Thriller"], [4, 4.0, 4, "Horror"], [1, 4.0, 1, "Sci-Fi"], [0, 0, 0, "Documentary"], [0, 0, 0, "War"], [0, 0, 0, "Musical"], [0, 0, 0, "Mystery"], [0, 0, 0, "Film-Noir"], [0, 0, 0, "Western"]]]
};
let color = [[172, 160, 215], [236, 187, 218], [230, 233, 131], [232, 143, 112], [175, 135, 214], [231, 129, 135], [207, 165, 105], [218, 143, 46], [113, 140, 163], [218, 216, 209], [146, 213, 197], [94, 137, 236], [237, 193, 165], [196, 91, 92], [217, 110, 203], [178, 80, 214], [127, 125, 126], [194, 145, 102],];

let width = 1350;
let height = 900;

//图表边距
let padding = 200;
let maxXAxis = [];
let maxYAxis = [];
let allRate = [];
//不同时间最大x值,y值,电影数值
for (let i = 0; i < data.year.length; i++) {
    let max = 0;
    let max2 = 0;
    let max3 = 0;
    for (let j = 0; j < data.types.length; j++) {
        if (max < data.series[i][j][0])
            max = data.series[i][j][0];
        if (max2 < data.series[i][j][1])
            max2 = data.series[i][j][1];
        max3 += data.series[i][j][0];
    }
    maxXAxis.push(max);
    maxYAxis.push(max2);
    allRate.push(max3);
}

let ySort = [];
let xScale = [];
let yScale = [];
for (let i = 0; i < data.year.length; i++) {
    let sort = [];
    xScale.push([]);
    yScale.push([]);
    for (let j = 0; j < data.types.length; j++) {
        sort.push(data.series[i][j][1]);
        xScale[i].push(data.series[i][j][0]/maxXAxis[i]);
        yScale[i].push(data.series[i][j][1]/maxYAxis[i]);
    }
    ySort.push(sort.sort());
}

//现在时间点
let currentTime = 0;

//散点图的零点
let zeroPoint = {
    x: padding,
    y: height - padding
};
//散点图的终点
let maxPoint = {
    x: width - padding,
    y: padding
};

//散点用-计算坐标
let calculateAxis = (x, y) => {
    let xRange = maxPoint.x - zeroPoint.x;
    let yRange = maxPoint.y - zeroPoint.y;
    return [x/maxXAxis[currentTime] * xRange + zeroPoint.x, y/5 * yRange + zeroPoint.y]
};
let counter = 0;
let type = 0;
let angle = 0;

let sketch = (p) => {
    let xAxis = () => {
        p.fill(155);
        p.textAlign(p.LEFT);
        p.textSize(20);
        p.text(0, zeroPoint.x, zeroPoint.y);
        p.text(maxXAxis[currentTime], maxPoint.x, zeroPoint.y);
        p.text("viewers", maxPoint.x, zeroPoint.y + 20)
    };

    let yAxis = () => {
        p.fill(155);
        p.textAlign(p.RIGHT);
        p.textSize(20);
        p.text(0, zeroPoint.x, zeroPoint.y - 20);
        p.text(5, zeroPoint.x, maxPoint.y - 20);
        p.text("Ratings", zeroPoint.x, maxPoint.y - 40);
    };

    let buttonText = () => {
        p.fill(125);
        p.textAlign(p.CENTER);
        p.textSize(50);
        p.text(data.year[currentTime], (buttonPosition.x2 + buttonPosition.x1)/2, buttonPosition.y+12.5);
    };
    let buttonPosition = {
        x1: 450,
        x2: 850,
        y: 80
    };

    let btn1 = createTriButton();
    let btn2 = createTriButton();
    function createTriButton() {
        return {
            width: 30,
            height: 60,

            drawTriButton: function (x, y, dir) {
                p.noStroke();
                p.fill(125);
                if (mouseInObj(x, y, dir))
                    this.onHover(dir);
                p.triangle(x, y, x + this.width*dir, y + this.height/2, x + this.width*dir, y - this.height/2);
            },

            onHover: function(dir) {
                dir === 1?p.fill(255,64,64):p.fill(127,207,112)
            },
        }
    }

//判断鼠标是否在tri的范围内
    function mouseInObj(x, y, dir) {
        if (dir === 1)
            return p.mouseX <= (x + btn1.width*dir)
                && p.mouseX >= x
                && p.mouseY >= y - (p.mouseX - x)
                && p.mouseY <= y + (p.mouseX - x);
        if (dir === -1)
            return p.mouseX <= x
                && p.mouseX >= (x + btn2.width*dir)
                && p.mouseY >= y - (x - p.mouseX)
                && p.mouseY <= y + (x - p.mouseX);
    }

// tri按钮触发
    let triButtonAction = () => {
        if (mouseInObj(buttonPosition.x1, buttonPosition.y, 1)) {
            if (currentTime !== 0)
                currentTime -= 1;
        }
        if (mouseInObj(buttonPosition.x2, buttonPosition.y, -1)) {
            if (currentTime !== (color.length - 1))
                currentTime += 1;
        }
    };

    p.setup =function() {
        p.createCanvas(width, height);
        p.background(0);
    };

    p.draw =function() {
        p.background(0, 75);
        btn1.drawTriButton(buttonPosition.x1, buttonPosition.y, 1);
        btn2.drawTriButton(buttonPosition.x2, buttonPosition.y, -1);
        outputText();

        buttonText();

        // pie -> arc
        if (type === -1) {
            counter += 1;
            for (let j = 0; j < data.types.length; j++) {
                let [x, y] = [width / 2, height / 2];
                dots[j].drawArc(x, y, 1, 0, 0, color[j], data.series[currentTime][j][3]);
            }
            if (counter === 30) {
                type = 0;
            }
        }

        //画出所有的点
        if (type === 0) {
            counter = 0;
            xAxis();
            yAxis();
            for (let j = 0; j < data.types.length; j++) {
                dots[j].arcReset();
                let [x, y] = calculateAxis(data.series[currentTime][j][0], data.series[currentTime][j][1]);
                dots[j].drawDot(x, y, data.series[currentTime][j][2] / 4 + 3, color[j], data.series[currentTime][j][3], j);
            }
        }

        // dot -> arc
        if (type === 1) {
            counter += 1;
            for (let j = 0; j < data.types.length; j++) {
                let [x, y] = [width / 2, height / 2];
                dots[j].drawDot(x, y, 1, color[j], data.series[currentTime][j][3]);
            }
            if (counter === 30) {
                type = 2;
            }
        }

        // arc
        if (type === 2) {
            counter = 0;
            // normalArcMode();
            ratingArcMode();
        }
    };
    // 鼠标单击事件
    // noinspection JSUnusedGlobalSymbols
    p.mousePressed =function() {
        triButtonAction();
        if (!mouseInObj(buttonPosition.x1, buttonPosition.y, 1)&&!mouseInObj(buttonPosition.x2, buttonPosition.y, -1)) {
            if (type === 0)
                type = 1;
            if (type === 2)
                type = -1;
            angle = 0;
        }
    };

    p.mouseWheel =function(event) {
        if (event > 0)
            angle += 0.5;
        else angle -= 0.5;
    };

    //所有的dot obj
    let dots = [];
    for (let j = 0; j < data.types.length; j++) {
        dots.push(createDot());
    }
// 创建一个可以变化的散点
    function createDot() {
        return  {
            //定义dot的起始属性
            x: width/2,
            y: height/2,
            size: 1,
            acc: 0.1,
            start: 0,
            end: 0,

            arcReset: function() {
                this.start = 0;
                this.end = 0;
            },


            //创建点
            drawDot: function(x, y, size, color, name , j) {
                p.noStroke();
                let originSize = size;
                this.color = color;
                let [r, g, b] = this.color;
                p.fill(r, g, b, 100);
                if (this.mouseInObj(x, y, size))
                    size = this.onHover(originSize, name, j);
                this.transTo(x, y, size);
            },

            drawArc: function(x, y, size, start, end, color) {
                p.noStroke();
                let [r, g, b] = color;
                p.fill(r, g, b, 150);
                this.adjustTo(x, y, size, start, end);
            },

            adjustTo: function (x, y, size, start, end) {
                this.x = this.x + this.acc * (x - this.x);
                this.y = this.y + this.acc * (y - this.y);
                this.size = this.size + this.acc * (size - this.size);
                this.start = this.start + this.acc * (start - this.start);
                this.end = this.end + this.acc * (end - this.end);
                p.arc(this.x, this.y, this.size, this.size, this.start, this.end);
            },


            //每帧的位置和尺寸偏移
            transTo: function (x, y, size) {
                this.x = this.x + this.acc * (x - this.x);
                this.y = this.y + this.acc * (y - this.y);
                this.size = this.size + this.acc * (size - this.size);
                p.ellipse(this.x, this.y, this.size);
            },

            onHover: function (size, name, j) {
                let [r, g, b] = this.color;
                p.fill(r, g, b, 200);
                p.textAlign(p.LEFT);
                p.textSize(25);
                p.text(name + ": \n" + data.series[currentTime][j][2] + " movies", this.x + size/2, this.y - size/2);
                return size*1.15;
            },

            //判断鼠标是否在dot的范围内
            mouseInObj: function(x, y, size) {
                return p.mouseX <= (x + size/2)
                    && p.mouseX >= (x - size/2)
                    && p.mouseY >= (y - size/2)
                    && p.mouseY <= (y + size/2)
            }
        };
    }

//普通arc
    function normalArcMode() {
        let start = angle;
        for (let j = 0; j < data.types.length; j++) {
            let end = start + (data.series[currentTime][j][0] / allRate[currentTime]) * 2 * p.PI;
            let [x, y] = [width / 2, height / 2];
            dots[j].drawArc(x, y, 600*((data.series[currentTime][j][1]-2)/2), start, end, color[j], data.series[currentTime][j][3]);
            start = end;
        }
    }

//按好评排序arc
    function ratingArcMode() {
        let start = angle;
        for (let i = 0; i < ySort[currentTime].length; i++) {
            let index = () => {
                for (let j = 0;j < data.series.length; j++) {
                    if (data.series[currentTime][j][1] === ySort[currentTime][i])
                        return j;
                }
            };
            let end = start + (data.series[currentTime][index()][0] / allRate[currentTime]) * 2 * p.PI;
            let [x, y] = [width / 2, height / 2];
            dots[index()].drawArc(x, y, 350*((data.series[currentTime][index()][1]-2)), start, end, color[index()], data.series[currentTime][index()][3]);
            start = end;
        }
    }

    let outputText = function () {
        let x = 130;
        let y = 200;
        for (let i = 0; i < data.types.length; i++) {
            createText(x, y, i);
            y += 30;
        }
    };

    function createText(x, y, index) {
        let [r, g, b] = color[index];
        p.fill(r, g, b, 150);
        p.textAlign(p.RIGHT);
        p.textSize(20);
        p.text(data.types[index], x, y);
        p.noStroke();
        p.rect(x + 5, y - 20, 50, 20);
    }
};
new p5(sketch, 'canvas');




